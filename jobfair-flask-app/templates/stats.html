<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>割当反映率</title>
  <style>
    *,*::before,*::after{box-sizing:border-box}
    body{font-family:sans-serif;margin:0;padding:2rem;background:#f9f9f9;display:flex;flex-direction:column;align-items:center}
    h1{margin-bottom:1rem;font-size:1.4rem}
    table{border-collapse:collapse;width:100%;max-width:1200px;table-layout:fixed;background:#fff}
    thead th{background:#e9ecef;padding:.5rem;border:1px solid #ccc;text-align:left}
    tbody td{padding:.5rem;border:1px solid #ccc;vertical-align:top;white-space:pre-line;word-break:break-word}

    /*️⃣  列幅調整 ── 学籍番号 / 反映率 は狭め  */
    thead th:first-child,tbody td:first-child{width:120px;min-width:120px}
    thead th:last-child,tbody td:last-child{width:90px;min-width:90px;text-align:center}

    tbody tr:nth-child(odd){background:#f6f6f6}

    @media(max-width:768px){
      table,thead,tbody,th,td,tr{display:block;width:100%}
      thead{display:none}
      tbody td{border:none;border-bottom:1px solid #ddd;position:relative;padding-left:45%}
      tbody td::before{content:attr(data-label);position:absolute;left:0;top:0;width:40%;padding:.5rem;font-weight:700;background:#e9ecef;border-right:1px solid #ccc;white-space:normal}
    }
  </style>
</head>
<body>
  <h1>割当と希望反映率</h1>
  <table>
    <thead>
      <tr>
        <th>学籍番号</th>
        <th>希望</th>
        <th>割当</th>
        <th>反映率</th>
      </tr>
    </thead>
    <tbody>
      {% for s in stats_data %}
      <tr>
        <td data-label="学籍番号">{{ s.student_id }}</td>
        <td data-label="希望">{{ s.matched | safe }}</td>
        <td data-label="割当">{{ s.assigned | safe }}</td>
        <td data-label="反映率">{{ s.reflect_rate }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
